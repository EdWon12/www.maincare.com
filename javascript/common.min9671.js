var ideoportal=function(){"use strict";this.ciSitId=0};ideoportal.prototype={getServiceAjaxUrl:function(e,t,o){var n=this.getServiceAjax()+"?component="+e+"&action="+t,r="";return null!=o&&(r=jQuery.param(o)),""!=r&&(n+="&"+r),n},getServiceAjax:function(){return c_reverse_path+"service/ajax/index.php"},getQueryParams:function(){var e=new Array,t=window.document.URL.toString();if(0<t.indexOf("?")){var o=t.split("?")[1].split("&"),n=0;for(n=0;n<o.length;n++){var r=o[n].split("="),i=r[0],a=unescape(r[1]);if(""!=i&&""!=a){var s=e[i];if(s instanceof Array)s.push(a);else if(null==s)e[i]=a;else{var d=new Array;d.push(s),d.push(a),e[i]=d}}}}return e},setSiteId:function(e){this.ciSitId=e},getSiteId:function(){return this.ciSitId},getJsConstant:function(e){return js_constant.hasOwnProperty(e)?js_constant[e]:null},setJsConstant:function(e,t){js_constant[e]=t}};var goIdeoportal=new ideoportal;function setAndExecute(divId,innerHTML,goToAnchor){var div=document.getElementById(divId);if(div){div.innerHTML=innerHTML;for(var x=div.getElementsByTagName("script"),num_script=0;num_script<x.length;num_script++)eval(x[num_script].text);goToAnchor&&(location.href="#"+divId)}}function formDisableSubmitButton(e){$("#"+e).find("button[type=submit]").prop("disabled",!0)}function ajaxFormSubmit(asFormId,asDivId,asBlock){if("undefined"!=typeof CKEDITOR)for(instance in CKEDITOR.instances)CKEDITOR.instances[instance].updateElement();"function"==eval("typeof beforeAjax"+asFormId+"Submit")&&window["beforeAjax"+asFormId+"Submit"]();var $loForm=$("#"+asFormId),$loMaxFileSizeInputs=$loForm.find("input").filter("[maxFileSize]"),lbMaxSizeAlert=!1;if($loMaxFileSizeInputs.each(function(){var e=this.files[0],t=$(this).attr("maxFileSize");e&&e.size>t&&(afficheMessage("{LANG fileupload Error max_file_size}","error"),lbMaxSizeAlert=!0)}),lbMaxSizeAlert)return!1;$loForm.find("button[type=submit],button[type=button], input[type=submit]").prop("disabled",!0);var loFormData=window.FormData?new FormData($loForm[0]):null;return loFormData=null!==loFormData?loFormData:$loForm.serialize(),$.ajax({type:$loForm.attr("method"),url:$loForm.attr("action"),contentType:!1,processData:!1,data:loFormData,dataType:"json",success:function(aoResponse){null!=aoResponse.html&&(null!=asDivId&&""!=asDivId&&$("#"+asDivId).html(aoResponse.html),"function"==eval("typeof onAjax"+asFormId+"Submit")?window["onAjax"+asFormId+"Submit"](aoResponse,asFormId):"function"==typeof onAjaxFormSubmit&&onAjaxFormSubmit(aoResponse,asFormId)),aoResponse.message&&(0<$("#"+asFormId+"-message").length&&$("#"+asFormId+"-message").is(":not(:hidden)")?afficheMessage(aoResponse.message.messageText,aoResponse.message.messageType,aoResponse.message.messageTitle,asFormId+"-message",asBlock,aoResponse.message.messageTpl):afficheMessage(aoResponse.message.messageText,aoResponse.message.messageType,aoResponse.message.messageTitle,"",asBlock,aoResponse.message.messageTpl),$loForm.find("button[type=submit],button[type=button], input[type=submit]").prop("disabled",!1))}}),!1}function openMedia(e){var t=screen.width-screen.width/100*30;popupscroll(e,screen.height-screen.height/100*30,t)}function popupscroll(e,t,o,n,r){var i=null!=window.screenLeft?window.screenLeft:screen.left,a=null!=window.screenTop?window.screenTop:screen.top;w=screen.width,h=screen.height;var s=w/2-o/2+i,d=h/2-t/2+a;n&&(t=screen.availHeight-30,o=screen.availWidth-10,s=d=0),winname=r||"popupscroll",wintype="toolbar=no,menubar=no,location='no',scrollbars=yes,top="+d+",left="+s,wintype=wintype+",height="+t+",width="+o,window.open(e,winname,wintype).focus()}function autoCompleteOff(e){$("#"+e).attr("autocomplete","off")}function getScripts(e,t){var o=0,n=function(){++o==e.length&&t()};e.forEach(function(e){$.getScript(e,n)})}var cookieManager=function(){};cookieManager.prototype={createCookie:function(e,t,o){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var r="; expires="+n.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},eraseCookie:function(e){this.createCookie(e,"",-1)}};var UrlHelper=function(e,t,o){var r,n=function(e){(r=this).csUrl=void 0===e?t.location.toString():e};return n.prototype={getUrl:function(){return r.csUrl},addParameterToUrl:function(e){var t=r.getQueryParams(r.csUrl);for(var o in e)t[o]=e[o];var n=r.csUrl.split("?");r.csUrl=n[0]+"?"+r.buildQueryString(t)},removeParameterToUrl:function(e){var t=r.getQueryParams(r.csUrl);delete t[e];var o=r.csUrl.split("?");r.csUrl=o[0]+"?"+r.buildQueryString(t)},getQueryParams:function(e){if(void 0===e&&(e=r.getUrl()),-1===e.indexOf("?"))return{};e=e.split("?")[1];for(var t,o={},n=/[?&]?([^=]+)=([^&]*)/g;t=n.exec(e);)o[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return o},buildQueryString:function(e){var t=[];for(var o in e){var n=e[o];t.push(encodeURIComponent(o)+"="+encodeURIComponent(n))}return t.join("&")}},n}($,window,document),middleActions=function(r,i,a){var s=!1,e=function(){};return e.prototype={acceptValid:function(e,t,o){r.ajax({type:"POST",url:goIdeoportal.getServiceAjaxUrl("workflow_validation","valid")+"&valid_id="+e+"&compId="+o+"&posted="+t,data:r("#form"+o).serialize(),success:function(e){""!=e&&("refresh"==e?i.location.reload():(setAndExecute("message",e),a.documentElement.scrollTop=0))}})},delModuleOne:function(e,t,o,n){s||(s=!0,r.ajax({url:goIdeoportal.getServiceAjaxUrl("middle_office_module","del_one"),dataType:"json",data:{elementId:e,posted:o,module:t,redirect:n},success:function(e){s=!1,r("#message").html(e.messageText),a.documentElement.scrollTop=0,"success"===e.messageType&&("1"==n?i.location.href=c_reverse_path:goMiddleActions.refreshGestionModule())}}))},validMassAction:function(e){var t=r("#"+e).closest("form");t.find('[name="valid"]').val(1),t.submit()},refreshGestionModule:function(){var e={comp_id:"middle_office_module"};null!==typeof goIdeoportal.getJsConstant("currentModule")&&(e.module=goIdeoportal.getJsConstant("currentModule")),r.get(goIdeoportal.getServiceAjaxUrl("middle_office_module","ajax_default_view",e)+" #moduleDefaultView",function(e){r("#moduleDefaultView").html(e)})},delPublication:function(o,e,t){r.ajax({url:goIdeoportal.getServiceAjaxUrl("middle_office_publication","del_publi"),dataType:"json",data:{artId:o,posted:e,redirect:t},success:function(e){setAndExecute("message",e.messageText),a.documentElement.scrollTop=0,"success"===e.messageType&&("1"==t?i.location.href=c_reverse_path:e.page?r.each(e.page,function(e,t){0<r("#art_"+o+" ."+e).length&&r("#art_"+o+" ."+e).html(t)}):r(".treetable").treetable("removeNode","art_"+o))}})},publishDraft:function(e,t,o){r.ajax({type:"POST",url:goIdeoportal.getServiceAjaxUrl("workflow_validation","publish_draft"),data:"originId="+e+"&typeId="+t+"&validId="+o,success:function(e){location.reload()}})},redirectToFront:function(){r.ajax({url:goIdeoportal.getServiceAjaxUrl("middle_office_module","redirect_front"),data:"redirect=0",success:function(e){i.location.href=e}})}},e}($,window,document),goMiddleActions=new middleActions;function equalHeight(e,t,o,n){void 0===n&&(n=!0),e.height("");var r=0;e.each(function(){var e=$(this),t=e.outerHeight(n);o&&(t-=parseFloat(e.css("border-top-width"))+parseFloat(e.css("border-bottom-width"))),r<t&&(r=t)}),0<r&&(t?e.css("min-height",r):e.height(r))}function getCurrentBreakpoint(){return isXS()?"xs":isSM()?"sm":isMD()?"md":"lg"}function isBreakpoint(e){return $(".device-"+e).is(":visible")}function isXS(){return isBreakpoint("xs")}function isSM(){return isBreakpoint("sm")}function isMD(){return isBreakpoint("md")}function isLG(){return isBreakpoint("lg")}function activeInternalLink(e,n){e instanceof jQuery&&e.on("click",function(e){if("A"!=$(e.target).prop("tagName")){e.preventDefault();var t=$(this).find("a");n&&(t=t.filter(n));var o=t.attr("href");o&&(t.attr("target")?window.open(o):window.location.href=o)}})}function uniqid(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<5;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e+Math.floor(1e6*Math.random())}function isMobile(){return isBreakpoint("xs")||isBreakpoint("sm")}function isDesktop(){return isBreakpoint("md")||isBreakpoint("lg")}function initCustomInputs(e){e||(e=document),$(e).find('label:not(.btn) > input[type="checkbox"]:not(.no-custom), label:not(.btn) > input[type="radio"]:not(.no-custom)').each(function(){var e=$(this);e.attr("id")||e.attr("id",uniqid()),e.closest("label").attr("for",e.attr("id")),e.insertBefore(e.closest("label"))})}function initFileDropZone(t){var o;t.on("dragover",function(e){clearTimeout(o),e.stopPropagation(),e.preventDefault(),t.addClass("uploadfile-dropzone")}),t.on("drop dragleave",function(e){o=setTimeout(function(){e.stopPropagation(),t.removeClass("uploadfile-dropzone")},100)})}function escapeJquerySelector(e){return String(e).replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1")}function checkIban(e){var t=e.replace(/ /g,"").toUpperCase(),o="",n=!0,r="";if(t.length<5)return!1;var i={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[t.substring(0,2)];if(void 0!==i&&!new RegExp("^[A-Z]{2}\\d{2}"+i+"$","").test(t))return!1;for(var a=t.substring(4,t.length)+t.substring(0,4),s=0;s<a.length;s++){var d=a.charAt(s);"0"!==d&&(n=!1),n||(o+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(d))}for(var l=0;l<o.length;l++){r=(""+r+o.charAt(l))%97}return 1===r}$(document).ready(function(){$(document).on("hidden.bs.modal",".form-modal",function(){$(this).remove(),$(".modal-backdrop").remove()}),$(document).on("show.bs.modal",".form-modal",function(){$(".form-modal").remove(),$(".modal-backdrop").remove()}),$(document).on("click",".quick-menu .dropdown-submenu",function(e){$(this).closest("li.dropdown-submenu").toggleClass("open-sub"),e.stopPropagation()}),$(document).ajaxError(function(e,t,o,n){var r=t.getResponseHeader("msg-err");null!=r&&afficheMessage("{LANG "+r+"}","error")})}),function(i,e){"$:nomunge";i.fn.serializeObject=function(){var r={};return i.each(this.serializeArray(),function(e,t){var o=t.name,n=t.value;r[o]=void 0===r[o]?n:i.isArray(r[o])?r[o].concat(n):[r[o],n]}),r}}(jQuery);var goCookieManager=new cookieManager;$.ajaxSetup({headers:{"X-XSRF-TOKEN":goCookieManager.readCookie("TOKEN-CSRF"+(80!=location.port&&443!=location.port?location.port:"")),session_mode:goIdeoportal.getJsConstant("session_mode")}}),$.fn.textWidth=function(e,t){return $.fn.textWidth.fakeEl||($.fn.textWidth.fakeEl=$("<span>").hide().appendTo(document.body)),$.fn.textWidth.fakeEl.text(e||this.val()||this.text()||this.attr("placeholder")).css("font",t||this.css("font")),$.fn.textWidth.fakeEl.width()};